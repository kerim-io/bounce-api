# ============================================================
# RAILWAY DEPLOYMENT COMMANDS - RUN THESE IN YOUR TERMINAL
# ============================================================
# Copy and paste these commands one by one
# ============================================================

# Step 1: Initialize Railway project
railway init
# When prompted:
#   - Select: Empty Project
#   - Enter name: bitbasel-backend

# Step 2: Add PostgreSQL database
railway add --database postgresql

# Step 3: Set all environment variables (copy this entire block)
railway variables set SECRET_KEY="0B1rytrChkzawGjS3vAPAVV8-Yht9LGI5tyBhLl3xFA"
railway variables set QR_SECRET_SALT="K1_p7MkQjtEdeXAKIPgoqdtae3nNWgh7gw5Baqp6Npg"
railway variables set ALGORITHM="HS256"
railway variables set ACCESS_TOKEN_EXPIRE_MINUTES="30"
railway variables set REFRESH_TOKEN_EXPIRE_DAYS="7"
railway variables set UPLOAD_DIR="uploads"
railway variables set MAX_FILE_SIZE="10485760"
railway variables set APPLE_TEAM_ID="GDZ9V6T9SF"
railway variables set APPLE_KEY_ID="5Y3L2S8R8R"
DATABASE_URL="postgresql://postgres:BLKUfDQHQHZuvUHRtDskQrBWFKDooOpH@${{Postgres.RAILWAY_PRIVATE_DOMAIN}}:5432/railway"
SECRET_KEY="0B1rytrChkzawGjS3vAPAVV8-Yht9LGI5tyBhLl3xFA"
QR_SECRET_SALT="K1_p7MkQjtEdeXAKIPgoqdtae3nNWgh7gw5Baqp6Npg"
ALGORITHM="HS256"
ACCESS_TOKEN_EXPIRE_MINUTES="60"
REFRESH_TOKEN_EXPIRE_DAYS="3650"
UPLOAD_DIR="uploads"
MAX_FILE_SIZE="10485760"
GOOGLE_MAPS_API_KEY="AIzaSyAVa2ABM09w2_TRHYwEz39IBgtwPL2VzUU"
REDIS_URL="redis://default:KeyqGGNfROrfLiavEBWJetApCyrWdlvH@redis.railway.internal:6379"
APPLE_TEAM_ID="GDZ9V6T9SF"
APNS_TEAM_ID="GDZ9V6T9SF"
APPLE_CLIENT_ID="com.theappagency.lit"
APPLE_REDIRECT_URI="https://baselradar.app/auth/callback"
APNS_BUNDLE_ID="com.theappagency.lit"
APNS_USE_SANDBOX="true"
APNS_KEY_ID="J67ZY799AV"
APPLE_KEY_ID="J67ZY799AV"
APNS_KEY_BASE64="MIGTAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBHkwdwIBAQQgRL7tvpWnAsxHOHvLOQxFOVe0RjnU7+ZEBpW3xe6NufegCgYIKoZIzj0DAQehRANCAASmXpK9fyO/dhkG8tSfAveTHkSx7rnGljJuZ0TW2RGxQbxL0TQnh/bLR5wmQgawvah4rd5cZcxbeE0tFz1vJ4ic"
APPLE_KEY_BASE64="MIGTAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBHkwdwIBAQQgRL7tvpWnAsxHOHvLOQxFOVe0RjnU7+ZEBpW3xe6NufegCgYIKoZIzj0DAQehRANCAASmXpK9fyO/dhkG8tSfAveTHkSx7rnGljJuZ0TW2RGxQbxL0TQnh/bLR5wmQgawvah4rd5cZcxbeE0tFz1vJ4ic"
railway variables set BASEL_RADIUS_KM="5"
railway variables set GOOGLE_MAPS_API_KEY="YOUR_GOOGLE_MAPS_API_KEY"
railway variables set GROQ="YOUR_GROQ_API_KEY"

# Step 4: Deploy the application
railway up

# Step 5: Generate public domain
railway domain

# Step 6: View deployment logs
railway logs --tail 100

# Step 7: Open Railway dashboard (to add volume)
railway open

# ============================================================
# AFTER DEPLOYMENT - Add Volume via Dashboard:
# 1. Click your service
# 2. Go to "Volumes" tab
# 3. Click "+ New Volume"
# 4. Mount Path: /app/uploads
# 5. Size: 1 GB
# 6. Click "Add"
# ============================================================

# Test your deployment
# Replace YOUR_DOMAIN with actual domain from step 5
curl https://YOUR_DOMAIN.railway.app/health
curl https://YOUR_DOMAIN.railway.app/
